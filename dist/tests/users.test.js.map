{"version":3,"sources":["../../src/tests/users.test.ts"],"sourcesContent":["import request from 'supertest';\r\nimport App from '@/app';\r\nimport { CreateUserDto } from '@dtos/users.dto';\r\nimport { User } from '@interfaces/users.interface';\r\nimport userModel from '@models/users.model';\r\nimport UserRoute from '@routes/users.route';\r\n\r\nafterAll(async () => {\r\n  await new Promise<void>(resolve => setTimeout(() => resolve(), 500));\r\n});\r\n\r\ndescribe('Testing Users', () => {\r\n  describe('[GET] /users', () => {\r\n    it('response statusCode 200 / findAll', () => {\r\n      const findUser: User[] = userModel;\r\n      const usersRoute = new UserRoute();\r\n      const app = new App([usersRoute]);\r\n\r\n      return request(app.getServer()).get(`${usersRoute.path}`).expect(200, { data: findUser, message: 'findAll' });\r\n    });\r\n  });\r\n\r\n  describe('[GET] /users/:id', () => {\r\n    it('response statusCode 200 / findOne', () => {\r\n      const userId = 1;\r\n      const findUser: User = userModel.find(user => user.id === userId);\r\n      const usersRoute = new UserRoute();\r\n      const app = new App([usersRoute]);\r\n\r\n      return request(app.getServer()).get(`${usersRoute.path}/${userId}`).expect(200, { data: findUser, message: 'findOne' });\r\n    });\r\n  });\r\n\r\n  describe('[POST] /users', () => {\r\n    it('response statusCode 201 / created', async () => {\r\n      const userData: CreateUserDto = {\r\n        email: 'example@email.com',\r\n        password: 'password',\r\n      };\r\n      const usersRoute = new UserRoute();\r\n      const app = new App([usersRoute]);\r\n\r\n      return request(app.getServer()).post(`${usersRoute.path}`).send(userData).expect(201);\r\n    });\r\n  });\r\n\r\n  describe('[PUT] /users/:id', () => {\r\n    it('response statusCode 200 / updated', async () => {\r\n      const userId = 1;\r\n      const userData: CreateUserDto = {\r\n        email: 'example@email.com',\r\n        password: 'password',\r\n      };\r\n      const usersRoute = new UserRoute();\r\n      const app = new App([usersRoute]);\r\n\r\n      return request(app.getServer()).put(`${usersRoute.path}/${userId}`).send(userData).expect(200);\r\n    });\r\n  });\r\n\r\n  describe('[DELETE] /users/:id', () => {\r\n    it('response statusCode 200 / deleted', () => {\r\n      const userId = 1;\r\n      const deleteUser: User[] = userModel.filter(user => user.id !== userId);\r\n      const usersRoute = new UserRoute();\r\n      const app = new App([usersRoute]);\r\n\r\n      return request(app.getServer()).delete(`${usersRoute.path}/${userId}`).expect(200, { data: deleteUser, message: 'deleted' });\r\n    });\r\n  });\r\n});\r\n"],"names":["afterAll","Promise","resolve","setTimeout","describe","it","findUser","userModel","usersRoute","UserRoute","app","App","request","getServer","get","path","expect","data","message","userId","find","user","id","userData","email","password","post","send","put","deleteUser","filter","delete"],"mappings":";;;;kEAAoB;4DACJ;mEAGM;mEACA;;;;;;AAEtBA,SAAS;IACP,MAAM,IAAIC,QAAcC,CAAAA,UAAWC,WAAW,IAAMD,WAAW;AACjE;AAEAE,SAAS,iBAAiB;IACxBA,SAAS,gBAAgB;QACvBC,GAAG,qCAAqC;YACtC,MAAMC,WAAmBC,mBAAS;YAClC,MAAMC,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIC,GAAG,CAAC,CAAC,EAAEN,WAAWO,IAAI,CAAC,CAAC,EAAEC,MAAM,CAAC,KAAK;gBAAEC,MAAMX;gBAAUY,SAAS;YAAU;QAC7G;IACF;IAEAd,SAAS,oBAAoB;QAC3BC,GAAG,qCAAqC;YACtC,MAAMc,SAAS;YACf,MAAMb,WAAiBC,mBAAS,CAACa,IAAI,CAACC,CAAAA,OAAQA,KAAKC,EAAE,KAAKH;YAC1D,MAAMX,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIC,GAAG,CAAC,CAAC,EAAEN,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEH,MAAM,CAAC,KAAK;gBAAEC,MAAMX;gBAAUY,SAAS;YAAU;QACvH;IACF;IAEAd,SAAS,iBAAiB;QACxBC,GAAG,qCAAqC;YACtC,MAAMkB,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YACA,MAAMjB,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIa,IAAI,CAAC,CAAC,EAAElB,WAAWO,IAAI,CAAC,CAAC,EAAEY,IAAI,CAACJ,UAAUP,MAAM,CAAC;QACnF;IACF;IAEAZ,SAAS,oBAAoB;QAC3BC,GAAG,qCAAqC;YACtC,MAAMc,SAAS;YACf,MAAMI,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YACA,MAAMjB,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIe,GAAG,CAAC,CAAC,EAAEpB,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEQ,IAAI,CAACJ,UAAUP,MAAM,CAAC;QAC5F;IACF;IAEAZ,SAAS,uBAAuB;QAC9BC,GAAG,qCAAqC;YACtC,MAAMc,SAAS;YACf,MAAMU,aAAqBtB,mBAAS,CAACuB,MAAM,CAACT,CAAAA,OAAQA,KAAKC,EAAE,KAAKH;YAChE,MAAMX,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIkB,MAAM,CAAC,CAAC,EAAEvB,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEH,MAAM,CAAC,KAAK;gBAAEC,MAAMY;gBAAYX,SAAS;YAAU;QAC5H;IACF;AACF"}
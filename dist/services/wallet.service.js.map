{"version":3,"sources":["../../src/services/wallet.service.ts"],"sourcesContent":["import { initializeDbConnection } from '@/app';\r\nimport { int } from 'neo4j-driver';\r\n\r\nclass walletService {\r\n\r\n  public async getAmount(sellerId) {\r\n    const getAmountSession = initializeDbConnection().session();\r\n    try {\r\n      const walletAmount = await getAmountSession.executeRead(tx =>\r\n        tx.run('match (w)<-[:HAS_A]-(s:seller {id: $sellerId}) return w', {\r\n          sellerId: sellerId,\r\n        }),\r\n      );\r\n\r\n      return walletAmount.records.map(record => record.get('w').properties.amount)[0];\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      getAmountSession.close();\r\n    }\r\n  }\r\n\r\n  public async UpdateAmount(sellerId, walletData) {\r\n    const updateAmountSession = initializeDbConnection().session();\r\n    try {\r\n      const updatedAmount = await updateAmountSession.executeWrite(tx =>\r\n        tx.run('match (w)<-[:HAS_A]-(s:seller {id: $sellerId}) set w.amount = w.amount + $newAmount return w', {\r\n          newAmount: int(walletData.data.newAmount),\r\n          sellerId: sellerId,\r\n        }),\r\n      );\r\n\r\n      return updatedAmount.records.map(record => record.get('w').properties)[0];\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      updateAmountSession.close();\r\n    }\r\n  }\r\n}\r\n\r\nexport default walletService;\r\n"],"names":["walletService","getAmount","sellerId","getAmountSession","initializeDbConnection","session","walletAmount","executeRead","tx","run","records","map","record","get","properties","amount","error","console","log","close","UpdateAmount","walletData","updateAmountSession","updatedAmount","executeWrite","newAmount","int","data"],"mappings":";;;;+BAyCA;;aAAA;;qBAzCuC;6BACnB;AAEpB,IAAA,AAAMA,gBAAN,MAAMA;IAEJ,MAAaC,UAAUC,QAAQ,EAAE;QAC/B,MAAMC,mBAAmBC,IAAAA,2BAAsB,IAAGC,OAAO;QACzD,IAAI;YACF,MAAMC,eAAe,MAAMH,iBAAiBI,WAAW,CAACC,CAAAA,KACtDA,GAAGC,GAAG,CAAC,2DAA2D;oBAChEP,UAAUA;gBACZ;YAGF,OAAOI,aAAaI,OAAO,CAACC,GAAG,CAACC,CAAAA,SAAUA,OAAOC,GAAG,CAAC,KAAKC,UAAU,CAACC,MAAM,CAAC,CAAC,EAAE;QACjF,EAAE,OAAOC,OAAO;YACdC,QAAQC,GAAG,CAACF;QACd,SAAU;YACRb,iBAAiBgB,KAAK;QACxB;IACF;IAEA,MAAaC,aAAalB,QAAQ,EAAEmB,UAAU,EAAE;QAC9C,MAAMC,sBAAsBlB,IAAAA,2BAAsB,IAAGC,OAAO;QAC5D,IAAI;YACF,MAAMkB,gBAAgB,MAAMD,oBAAoBE,YAAY,CAAChB,CAAAA,KAC3DA,GAAGC,GAAG,CAAC,gGAAgG;oBACrGgB,WAAWC,IAAAA,gBAAG,EAACL,WAAWM,IAAI,CAACF,SAAS;oBACxCvB,UAAUA;gBACZ;YAGF,OAAOqB,cAAcb,OAAO,CAACC,GAAG,CAACC,CAAAA,SAAUA,OAAOC,GAAG,CAAC,KAAKC,UAAU,CAAC,CAAC,EAAE;QAC3E,EAAE,OAAOE,OAAO;YACdC,QAAQC,GAAG,CAACF;QACd,SAAU;YACRM,oBAAoBH,KAAK;QAC3B;IACF;AACF;MAEA,WAAenB"}
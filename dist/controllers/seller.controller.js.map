{"version":3,"sources":["../../src/controllers/seller.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport sellerService from '@services/seller.service';\r\n\r\nclass sellerController {\r\n  public sellerService = new sellerService();\r\n\r\n  public getSubscriptionPlans = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = String(req.params.id);\r\n\r\n      const subscriptionPlans = await this.sellerService.getSubscriptiionPlans(userId);\r\n\r\n      res.status(200).json({ subscriptionPlans });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public createSubscribePlans = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = String(req.params.id);\r\n      const subscriptionPlansData = req.body;\r\n\r\n      const createdSubscriptionPlans = await this.sellerService.createSubscribePlans(userId, subscriptionPlansData);\r\n\r\n      res.status(200).json({ createdSubscriptionPlans });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public getFollowersCount = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const sellerId = String(req.params.id);\r\n      \r\n      const followersCount = await this.sellerService.getFollowersCount(sellerId);\r\n\r\n      res.status(201).json({ followers: followersCount });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public updatePlans = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const plans = req.body.data;\r\n      \r\n      const result = await this.sellerService.changePlans(plans);\r\n\r\n      res.status(201).json(result);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public uploadIdentityCard = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = String(req.params.id);\r\n      \r\n      const identityCardData = req.files;\r\n      \r\n      await this.sellerService.uploadIdentityCard(identityCardData, userId);\r\n\r\n      res.status(201).json({ message: \"identity card haq been uploaded successfully\", status: 200 });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n}\r\n\r\nexport default sellerController;\r\n"],"names":["sellerController","sellerService","getSubscriptionPlans","req","res","next","userId","String","params","id","subscriptionPlans","getSubscriptiionPlans","status","json","error","createSubscribePlans","subscriptionPlansData","body","createdSubscriptionPlans","getFollowersCount","sellerId","followersCount","followers","updatePlans","plans","data","result","changePlans","uploadIdentityCard","identityCardData","files","message"],"mappings":";;;;+BAsEA;;;eAAA;;;sEArE0B;;;;;;;;;;;;;;;;;;;AAE1B,IAAA,AAAMA,mBAAN,MAAMA;;QACJ,uBAAOC,iBAAgB,IAAIA,sBAAa;QAExC,uBAAOC,wBAAuB,OAAOC,KAAcC,KAAeC;YAChE,IAAI;gBACF,MAAMC,SAASC,OAAOJ,IAAIK,MAAM,CAACC,EAAE;gBAEnC,MAAMC,oBAAoB,MAAM,IAAI,CAACT,aAAa,CAACU,qBAAqB,CAACL;gBAEzEF,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEH;gBAAkB;YAC3C,EAAE,OAAOI,OAAO;gBACdT,KAAKS;YACP;QACF;QAEA,uBAAOC,wBAAuB,OAAOZ,KAAcC,KAAeC;YAChE,IAAI;gBACF,MAAMC,SAASC,OAAOJ,IAAIK,MAAM,CAACC,EAAE;gBACnC,MAAMO,wBAAwBb,IAAIc,IAAI;gBAEtC,MAAMC,2BAA2B,MAAM,IAAI,CAACjB,aAAa,CAACc,oBAAoB,CAACT,QAAQU;gBAEvFZ,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEK;gBAAyB;YAClD,EAAE,OAAOJ,OAAO;gBACdT,KAAKS;YACP;QACF;QAEA,uBAAOK,qBAAoB,OAAOhB,KAAcC,KAAeC;YAC7D,IAAI;gBACF,MAAMe,WAAWb,OAAOJ,IAAIK,MAAM,CAACC,EAAE;gBAErC,MAAMY,iBAAiB,MAAM,IAAI,CAACpB,aAAa,CAACkB,iBAAiB,CAACC;gBAElEhB,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAES,WAAWD;gBAAe;YACnD,EAAE,OAAOP,OAAO;gBACdT,KAAKS;YACP;QACF;QAEA,uBAAOS,eAAc,OAAOpB,KAAcC,KAAeC;YACvD,IAAI;gBACF,MAAMmB,QAAQrB,IAAIc,IAAI,CAACQ,IAAI;gBAE3B,MAAMC,SAAS,MAAM,IAAI,CAACzB,aAAa,CAAC0B,WAAW,CAACH;gBAEpDpB,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAACa;YACvB,EAAE,OAAOZ,OAAO;gBACdT,KAAKS;YACP;QACF;QAEA,uBAAOc,sBAAqB,OAAOzB,KAAcC,KAAeC;YAC9D,IAAI;gBACF,MAAMC,SAASC,OAAOJ,IAAIK,MAAM,CAACC,EAAE;gBAEnC,MAAMoB,mBAAmB1B,IAAI2B,KAAK;gBAElC,MAAM,IAAI,CAAC7B,aAAa,CAAC2B,kBAAkB,CAACC,kBAAkBvB;gBAE9DF,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEkB,SAAS;oBAAgDnB,QAAQ;gBAAI;YAC9F,EAAE,OAAOE,OAAO;gBACdT,KAAKS;YACP;QACF;;AACF;MAEA,WAAed"}